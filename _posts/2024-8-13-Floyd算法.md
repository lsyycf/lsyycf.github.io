---
layout: post
title: "Floyd算法"
date:   2024-8-13
tags: [算法竞赛,图论]
comments: true
author: lsyycf

---

求解图中的最短路径问题
<!-- more -->

```
#include <bits/stdc++.h>
#define io cin.tie(0), cout.tie(0), ios::sync_with_stdio(false)
#define LL long long
#define ULL unsigned long long
#define EPS 1e-8
#define INF 0x7fffffff
#define SUB -INF - 1
using namespace std;
const int N = 505;
int w[N][N];
int path[N][N];
int tax[N];
int n = 0;
void init()
{
    for (int i = 0; i <= n; i++)
    {
        for (int j = 0; j <= n; j++)
        {
            if (i != j)
                w[i][j] = INF;
            else
                w[i][j] = 0;
            path[i][j] = j;
        }
    }
}
void Floyd()
{
    for (int k = 1; k <= n; k++)
        for (int i = 1; i <= n; i++)
            for (int j = 1; j <= n; j++)
                if (w[i][k] != INF && w[k][j] != INF)
                {
                    int temp = w[i][k] + w[k][j] + tax[k];
                    if (w[i][j] > temp)
                    {
                        w[i][j] = temp;
                        path[i][j] = path[i][k];
                    }
                    else if (w[i][j] == temp && path[i][j] > path[i][k])
                        path[i][j] = path[i][k];
                }
}
int main()
{
    while (cin >> n && n)
    {
        init();
        for (int i = 1; i <= n; i++)
        {
            for (int j = 1; j <= n; j++)
            {
                cin >> w[i][j];
                if (w[i][j] == -1)
                    w[i][j] = INF;
            }
        }
        for (int i = 1; i <= n; i++)
            cin >> tax[i];
        Floyd();
        int s, t;
        while (cin >> s >> t && s != -1 && t != -1)
        {
            printf("From %d to %d :\n", s, t);
            printf("Path: ");
            int temp = s;
            printf("%d", temp);
            while (temp != t)
            {
                printf("-->%d", path[temp][t]);
                temp = path[temp][t];
            }
            printf("\n");
            printf("Total cost : %d\n\n", w[s][t]);
        }
    }
    return 0;
}
```

